try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="5a4d4236-dd92-40e4-af03-6e6a5302d730",e._sentryDebugIdIdentifier="sentry-dbid-5a4d4236-dd92-40e4-af03-6e6a5302d730")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"9cd379f7d8a2403cc081beb8b3aa2d916ea37864"};(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9786],{34524:(e,a,t)=>{t.d(a,{$E:()=>z,$i:()=>x,Ay:()=>$,Fw:()=>N,GE:()=>j,HH:()=>E,I2:()=>Y,Lz:()=>R,MS:()=>K,Q5:()=>D,QB:()=>v,XB:()=>P,XZ:()=>A,eb:()=>G,i$:()=>B,i8:()=>O,iM:()=>M,j5:()=>H,jO:()=>C,jp:()=>I,mY:()=>T,nj:()=>V,o3:()=>k,oP:()=>F,sF:()=>_,th:()=>Z,wt:()=>L});var o=t(20038),s=t(25508),n=t(48554),i=t(42891),c=t(5298),d=t(91323),r=t(11436),l=t(53210),u=t(15049),p=t(89385),f=t(17782),m=t(73421),g=t(16345),y=t(28933),h=t(83569),b=t(35190);let w;try{navigator?.cookieDeprecationLabel&&navigator.cookieDeprecationLabel.getValue().then((e=>{w=e}))}catch{}const S=(0,o.Z0)({name:"ads",initialState:{takeover:null,pokiSDKLoaded:!1,adStackLoaded:!1,adStackReadyForLoad:!1,adBlocked:!1,mobileAdsOpportunity:!1,gameBarHouseAdCount:0,gameBarHouseAdEmpty:!1},reducers:{pokiSDKLoaded:e=>{e.pokiSDKLoaded=!0},adStackLoaded:e=>{e.adStackLoaded=!0},adBlocked:e=>{e.adBlocked=!0},startImmersiveTakeover:(e,a)=>{e.takeover=a.payload.takeover},stopImmersiveTakeover:e=>{e.takeover=null},setMobileAdsOpportunity:(e,a)=>{e.mobileAdsOpportunity=a.payload.allowed},countGameBarHouseAd:(e,a)=>{e.gameBarHouseAdEmpty=a.payload.isEmpty,e.gameBarHouseAdCount+=a.payload.isEmpty?0:1}},extraReducers:e=>{e.addCase(n.Br,(e=>{e.adStackReadyForLoad=!0,e.gameBarHouseAdCount=0,e.gameBarHouseAdEmpty=!1}))}}),_=(0,o.VP)("ads/refresh_display_ads"),k=(0,f.A)("ads/display_ad"),A=(0,f.A)("ads/refresh_ad"),v=(0,f.A)("ads/destory_ad_slot"),L=(0,o.VP)("ads/force_stop_ad_refresh"),B=(0,o.VP)("ads/cleanup_companion_ad"),{pokiSDKLoaded:P,adStackLoaded:E,adBlocked:D,startImmersiveTakeover:C,stopImmersiveTakeover:I,setMobileAdsOpportunity:G,countGameBarHouseAd:F}=S.actions,O=(0,s.Mz)(i.Kk,u.dR,u.lb,((e,a,t)=>{if("undefined"!=typeof window){const e=new URL(window?.location?.toString())?.searchParams?.get("force_ay_mode")||b.G8.NOT_APPLICABLE;if([b.G8.DISABLED,b.G8.PBS_ONLY,b.G8.DPF_ONLY,b.G8.CSTS_ONLY,b.G8.PBS_DPF_CSTS,b.G8.ON].includes(e))return console.warn("AY mode set by URL parameter:",e),e}return t||!a?b.G8.NOT_APPLICABLE:e>=4&&e<8?b.G8.PBS_ONLY:e>=8&&e<12?b.G8.DPF_ONLY:e>=12&&e<16?b.G8.DISABLED:b.G8.ON})),N=(0,s.Mz)(O,i.wu,((e,a)=>(0,y.J)(e,a))),x=(0,s.Mz)(r.m_,d.Gd,c.Vv,l.p,i.H6,O,p.Ep,((e,a,t,o,s,n,i)=>{const c={tag:"pg-v9cd379f7d8a2403cc081beb8b3aa2d916ea37864",ab:Math.floor(100*Math.random()).toString(),experiment:o,page_has_mpu:"no",page_has_skyscraper:"no",page_has_lead:"no",cookieDepL:w,site_id:a.id,ay_mode:n,is_logged_in:i};if(t&&(c["game-id"]=t.id,c.categories=(t.categories||[]).map((({id:e})=>e)),o&&(c.expid_content_gameid=`${o}|${t.id}`)),e&&(c.debug=e),!s){let e=3;const a=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),t=Object.keys(m.xu);for(let o=0;o<t.length;o++){const s=Number(t[o]),n=m.xu[s]||0,i=m.xu[Number(t[o+1])]||1/0;if(a>=n&&a<=i){e=s;break}}c.page_has_lead="yes",e>=12&&(c.page_has_mpu="yes"),[9,11,17].includes(e)&&(c.page_has_skyscraper="yes")}return c}));function M(e){return e.ads.takeover}function R(e){return e.ads.pokiSDKLoaded}function H(e){return e.ads.adStackLoaded}function T(e){return e.ads.gameBarHouseAdCount}function K(e){return e.ads.gameBarHouseAdEmpty}const V=e=>e.ads.adBlocked,U=(0,s.Mz)(i.H6,(e=>e.ads.adStackReadyForLoad),((e,a)=>!e||a));function j(e){return e.ads.mobileAdsOpportunity}const Z=(0,s.Mz)(R,i.Wv,U,d.DF,((e,a,t,o)=>{(0,h.K)("selectAdStackReady:inputs",{sdkLoaded:e,consentSettled:a,adStackStartMoment:t});const s=e&&a&&t&&o!==d.LJ.CAR;return(0,h.K)("selectAdStackReady:result",{result:s}),s})),z=(0,s.Mz)(c.Vv,(e=>{const a=[];return e?.categories&&e.categories.forEach((e=>{e.iabCategories&&e.iabCategories.split(",").forEach((e=>{a.includes(e)||a.push(e)}))})),a.sort(),a})),Y=(0,s.Mz)(c.Vv,d.Gd,((e,a)=>{const t=(0,g.A)(),o=3===a.id?"Poki":a.domain_title;return{site:{name:o,domain:window.location.hostname,page:window.location.href,privacypolicy:1,publisher:{name:o,domain:a.domain},content:e?{id:`${e.id}`,title:e.title,url:window.location.href,sourcerelationship:1}:{}},device:{w:t.width,h:t.height}}})),$=S},89385:(e,a,t)=>{t.d(a,{Ay:()=>T,Bp:()=>R,C4:()=>P,Cf:()=>G,Ep:()=>_,Fh:()=>A,Gf:()=>x,Gw:()=>k,IT:()=>b,PZ:()=>E,QF:()=>w,V1:()=>I,Z:()=>v,bW:()=>M,hK:()=>O,iJ:()=>h,ij:()=>S,jv:()=>B,qb:()=>N,qf:()=>C,vJ:()=>L});var o=t(25508),s=t(20038),n=t(10179),i=t(88800),c=t(40620),d=t(98708),r=t(11436),l=t(79906),u=t(16536),p=t(46493),f=t(52694),m=t(23038),g=t(61363),y=t(7537);const h=e=>e.account.status,b=e=>e.account.session,w=e=>e.account.flow,S=e=>e.account.isPanelVisible,_=e=>200===e.account.status,k=e=>e.account.wasLoggedInBefore,A=e=>e.account.disabledSaveGames,v=e=>e.account.source,L=e=>e.account.avatar,B=(0,o.Mz)(L,(e=>Boolean(e.eyes||e.bodyShape||e.color))),P=e=>e.account.username,E=e=>e.account.showNotificationBubble,D=(0,s.Z0)({name:"account",initialState:{status:null,session:null,flow:null,isPanelVisible:!1,source:null,wasLoggedInBefore:!1,disabledSaveGames:[],hasPasskeySupport:!0,username:null,avatar:{bodyShape:null,color:null,eyes:null},showNotificationBubble:!1},reducers:{toggleAccountPanel:(e,a)=>{e.isPanelVisible=!e.isPanelVisible,e.source=a?.payload?.source||null;const t=e.isPanelVisible?"hidden":"auto";document.body.style.overflow=t,!e.isPanelVisible&&window.frames?.gameFrame?.postMessage&&window.frames.gameFrame.postMessage?.({type:"pokiAccountsAuthPanelClosed"},"*")},setAccountSource:(e,a)=>{e.source=a.payload.source},setWasLoggedInBefore:e=>{e.wasLoggedInBefore=!0},setFlow:(e,a)=>{let t=a.payload.flowData;const o=(e=>e.account.hasPasskeySupport)({account:e});t=(0,f.py)(t),o||(t=(0,f.rn)(t)),e.flow=t},setDisabledSaveGames:(e,a)=>{e.disabledSaveGames.includes(a.payload.gameID)||e.disabledSaveGames.push(a.payload.gameID)},setHasPasskeySupport:(e,a)=>{e.hasPasskeySupport=a.payload.hasPasskeySupport},setAvatar:(e,a)=>{e.avatar={...e.avatar,...a.payload.avatar}},setAccountUsername:(e,a)=>{e.username=a.payload.username},setShowNotificationBubble:(e,a)=>{e.showNotificationBubble=a.payload.showNotificationBubble}},extraReducers:e=>{e.addCase(n.sx.fulfilled,((e,a)=>{const t=a.payload;e.session=t,e.status=200})),e.addCase(n.sx.rejected,(e=>{e.session=null,e.status=401}))}}),{toggleAccountPanel:C,setFlow:I,setWasLoggedInBefore:G,setHasPasskeySupport:F,setDisabledSaveGames:O,setAccountUsername:N,setAvatar:x,setAccountSource:M,setShowNotificationBubble:R}=D.actions;(0,u.Zv)({actionCreator:n.sx.fulfilled,effect:(e,a)=>{const t=a.getState(),o=b(t);a.unsubscribe();const s=o?.identity?.is_first_login,i=o?.identity?.id||"unknown",c=o?.authentication_method||"unknown",d=new URL(window.location.href).searchParams.get("accountSource");a.dispatch(G()),a.dispatch(m.lh.endpoints.getProfile.initiate({})).then((e=>{const t=e?.data;t?.username&&a.dispatch(N({username:t.username}))})),s?((0,p.F)({category:"account",action:"registerSuccess",label:c,data:{accountId:i,source:d}}),a.dispatch((0,n.jE)())):(0,p.F)({category:"account",action:"loginSuccess",label:c,data:{accountId:i,source:d}})}}),(0,u.Zv)({actionCreator:n.sx.rejected,effect:async(e,a)=>{a.unsubscribe();const t=await(0,f.ec)();a.dispatch(F({hasPasskeySupport:t})),(0,p.F)({category:"account",action:"hasPasskeySupport",label:t?"true":"false"})}});let H=null;(0,u.Zv)({matcher:(0,s.i0)(n.sx.fulfilled,n.sx.rejected),effect:(e,{unsubscribe:a})=>{window.addEventListener("message",(e=>{if("pokiAccountsGetUserInfo"===e?.data?.type){if(null===H){const e=window.store?.getState();if(!e)return console.error("No store found to get account state"),void window.frames?.gameFrame?.postMessage?.({type:"pokiAccountsUserInfo",enabled:!1,session:null},"*");H=b(e)}window.frames?.gameFrame?.postMessage?.({type:"pokiAccountsUserInfo",enabled:!0,session:{id:H?.id||""}},"*")}})),a()}}),(0,u.Zv)({matcher:(0,s.i0)(n.sx.fulfilled,n.sx.rejected),effect:(e,{getState:a,dispatch:t,unsubscribe:o})=>{o();const s=a(),n=(0,r.fn)(s),c=S(s),l=_(s),u=n.includes("flow="),p=n.includes("id="),f=n.includes("trigger_registration="),m=n.includes("accountSource=");if((u&&!l||f)&&!c){let e="url";f&&m&&(e=new URLSearchParams(n).get("accountSource")),t(C({source:e}))}if(p){const e=(0,d.K)(s).search_broken,a=new URL(window.location.href);a.searchParams.delete("id"),window.history.replaceState({},document.title,a.toString()),t((0,i.Gg)({notification:{title:e,clickOutsideToClose:!0,autoExpire:8e3}}))}}}),(0,u.Zv)({actionCreator:n.sx.fulfilled,effect:async(e,{unsubscribe:a,dispatch:t,getState:o})=>{a();const s=o(),c=b(s),r=(0,d.K)(s),u=c?.authentication_method;if("passkey"!==u)return;try{const e=new URL(window.location.href),a=e.searchParams.get("flow"),o=await(0,n.hm)({flow:a}),{messages:s}=o?.data?.ui||{};if(s&&s.length>0){const[a]=s;4000007===a.id&&(t((0,i.Gg)({notification:{title:r?.passkey_recover_failed,clickOutsideToClose:!0,autoExpire:8e3}})),(0,p.F)({category:"account",action:"passkeyLinkingFailed"}),e.searchParams.delete("flow"),window.history.replaceState({},document.title,e.toString()))}const{linked:c}=o.data;if(c&&c.length>0){if("success"===e.searchParams.get("linked")){e.searchParams.delete("linked"),window.history.replaceState({},document.title,e.toString()),(0,p.F)({category:"account",action:"passkeyLinkingSuccess"});const a={notification:{title:"Success",message:`<span class="${y.notification_wrapperIsFeedback__body}">${r?.passkey_recover_success}</span>`,theme:"feedback",autoExpire:4e3}};t((0,i.Gg)(a))}return}}catch(e){}const f=864e5;t((0,l.mi)({modal:{id:g.PASSKEY_RECOVERY_MODAL_ID,iconDesktop:"ui-icons-lock",iconMobile:"content-icons-privacy",muteAfterClose:!0,muteExpirationTime:[f,f,6048e5,2592e6],childComponent:{name:"modals/PasskeyRecovery"}}}))}}),(0,u.Zv)({actionCreator:n.sx.fulfilled,effect:(e,a)=>{const t=a.getState(),o=B(t);a.unsubscribe(),o?a.dispatch(R({showNotificationBubble:!1})):(a.dispatch((0,c.oK)({tooltip:{id:"avatarBuilder",consumerId:"userAvatar",htmlContent:"<strong>Customization available.</strong><p>Try it out in your account.</p>",showCloseButton:!0,muteAfterClose:!0}})),a.dispatch(R({showNotificationBubble:!0})))}});const T=D}}]);
//# sourceMappingURL=client~main-423f78fa~1805987d5e3be553d94a.js.map